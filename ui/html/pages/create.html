{{define "title"}}Create a New Post{{end}} {{define "main"}}
<form id="uploadForm" action="/snippet/create" enctype="multipart/form-data" method="POST">
  <div>
    <label>Title:</label>
    {{with .Form.FieldErrors.title}}
    <label class="error">{{.}}</label>
    {{end}}
    <input type="text" name="title" value="{{.Form.Title}}" />
  </div>
  <div>
    <label>Content:</label>
    {{with .Form.FieldErrors.content}}
    <label class="error">{{.}}</label>
    {{end}}
    <textarea name="content">{{.Form.Content}}</textarea>
  </div>
  <div>
    <label>Category:</label>
    {{with .Form.FieldErrors.category}}
    <label class="error">{{.}}</label>
    {{end}}
    <input type="checkbox" name="category" value="Gaming" />Gaming
    <input type="checkbox" name="category" value="Sports" />Sports
    <input type="checkbox" name="category" value="Movies" />Movies
    <input type="checkbox" name="category" value="Politics" />Politics
    <input type="checkbox" name="category" value="Business" />Business
  </div>
  <div>
    {{with .Form.FieldErrors.image}}
    <label class="error">{{.}}</label>
    {{end}}
    <input type="file" name="image_name" id="fileInput"/>
  </div>
  <div>
  <div>
    <input type="submit" value="Publish post" id="submitButton" disabled/>
  </div>
</form>

<script>
  // Get the file input element and the submit button
  const fileInput = document.getElementById('fileInput');
  const submitButton = document.getElementById('submitButton');

  // Add an event listener to the file input element
  fileInput.addEventListener('change', () => {
      // Check if a file has been selected
      if (fileInput.files.length > 0) {
          // Enable the submit button
          submitButton.removeAttribute('disabled');
      } else {
          // Disable the submit button if no file is selected
          submitButton.setAttribute('disabled', 'disabled');
      }
  });
</script>
{{end}}
